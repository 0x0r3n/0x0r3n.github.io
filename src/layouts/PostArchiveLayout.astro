---
// Component Imports
import Main from "../layouts/MainLayout.astro";
import SideBar from "../components/SideBar.astro";
import Footer from "../components/Footer.astro";
import ArchiveYearTitle from "../components/misc/ArchiveYearTitle.astro";
import ArchivePost from "../components/misc/ArchivePost.astro";

import { type Archive } from "../utils/content";

export interface Props {
	archiveMap: Map<number, Array<Archive>>;
	title?: string;
	subTitle?: string;
	headerImg?: string;
	hashedSlug?: string;
}

const { archiveMap, title, subTitle, headerImg, hashedSlug } = Astro.props;
---

<Main
	title={title}
	subTitle={subTitle}
	headerImg={headerImg}
	hashedSlug={hashedSlug}
>
	<div class="flex flex-row xl:space-x-4 items-start">
		<div class="side-bar">
			<SideBar />
		</div>
		<div class="space-y-10 w-full">
			<div class="archives onload-animation">
				{
					archiveMap.keys().map((year) => (
						<div>
							<ArchiveYearTitle
								year={year}
								count={archiveMap.get(year)!.length}
							/>
							<ul>
								{archiveMap.get(year)?.map((entry) => (
									<li>
										<ArchivePost
											slug={entry.slug}
											title={entry.title}
											pubilished={entry.date}
											tags={entry.tags}
										/>
									</li>
								))}
							</ul>
						</div>
					))
				}
			</div>
			<Footer />
		</div>
	</div>
</Main>

<style>
	.side-bar {
		@apply hidden min-w-[248px] xl:block;
	}

	.archives {
		@apply bg-[var(--card-color)] p-10 rounded-2xl shrink flex flex-col w-full space-y-4;
	}
</style>
